<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="description" content="本文是对常见存储方案的简要汇总介绍。"><meta name="keyword" content="IaaS,Storage"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no"><meta http-equiv="X-UA-Compatible" content="IE=edge"><title>常见存储方案分类整理</title><link rel="icon" href="data:image/svg+xml,%3Csvg width='24' height='28' xmlns='http://www.w3.org/2000/svg'%3E%3Ctext font-size='24' y='24'%3E諺%3C/text%3E%3C/svg%3E" type="image/x-icon"><link href="/styles/site.css" rel="stylesheet"><script async src="https://eu.umami.is/script.js" data-website-id="449a84b6-be9e-49de-a4cc-e0fa6fea1df9"></script><meta name="generator" content="Hexo 6.3.0"></head><body><header><div class="header no-print"><div class="header-container"><div class="header-left"><a href="/">諺</a></div><ul class="header-right"><li><a href="/archives">Archives</a></li><li><a href="/tags" rel="nofollow">Tags</a></li><li><a href="/about" rel="nofollow">About</a></li><li><a href="/epistemology" rel="nofollow">認識論</a></li><li><a href="/books" rel="nofollow">読書</a></li><li><a href="/archives" rel="nofollow">zh</a><a href="#" rel="nofollow">/</a><a href="/en" rel="nofollow">en</a></li></ul></div></div></header><div class="container"><div class="content-wrapper"><div class="post"><section class="article"><div class="title">常见存储方案分类整理</div><div class="date no-print">2021-07-28 / modified at 2025-06-15 / 1k words / 3 mins</div><div class="content"><p>本文是对常见存储方案的简要汇总介绍。</p><span id="more"></span><p>在PaaS设计中，存储是对密度要求最大的部分。在应用服务中，有K8s/nomad等框架可以很容易处理计算调度编排问题，有抽象网络处理流控与ACL问题。而存储却门槛却极高，开源软件很难开箱即用，而且一般是要求高密度，高承诺，紧耦合的，它需要网络数通、路由与压缩算法、前端ASIC、专用OS(FS)、RIAD ASIC、SSD平衡算法等复合知识，也是加班最很的。</p><p>本文介绍内容在app之下，infra之上，方便软件类SE更好设计app系统。</p><h2>Infra层</h2><p>下文是大致范围</p><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="MINDMAP" height="1007px" preserveAspectRatio="none" style="width:809px;height:1007px;background:#fff" version="1.1" viewBox="0 0 809 1007" width="809px" zoomAndPan="magnify" class="kroki">$2<defs/><g><rect fill="#F1F1F1" height="52.5938" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="33.9999" x="10" y="476.3008"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="13.9999" x="20" y="499.2959">&#23384;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="13.9999" x="20" y="515.5928">&#20648;</text><rect fill="#F1F1F1" height="85.1875" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="33.9999" x="93.9999" y="347.4102"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="13.9999" x="103.9999" y="370.4053">&#23384;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="13.9999" x="103.9999" y="386.7021">&#20648;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="13.9999" x="103.9999" y="402.999">&#26426;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="13.9999" x="103.9999" y="419.2959">&#26694;</text><rect fill="#F1F1F1" height="52.5938" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="157.7299" x="177.9999" y="40"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="55.9998" x="187.9999" y="62.9951">&#30828;&#20214;&#23384;&#20648;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="137.7299" x="187.9999" y="79.292">&#65288;&#19987;&#29992;&#30828;&#20214;+&#30828;&#30424;&#26694;&#65289;</text><rect fill="#F1F1F1" height="36.2969" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="71.9258" x="385.7298" y="20"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="51.9258" x="395.7298" y="42.9951">NetApp</text><path d="M335.7298,66.2969 L345.7298,66.2969 C360.7298,66.2969 360.7298,38.1484 375.7298,38.1484 L385.7298,38.1484" fill="none" style="stroke:#454645;stroke-width:1"/><rect fill="#F1F1F1" height="36.2969" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="93.4795" x="385.7298" y="76.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="73.4795" x="395.7298" y="99.292">OceanStor</text><path d="M335.7298,66.2969 L345.7298,66.2969 C360.7298,66.2969 360.7298,94.4453 375.7298,94.4453 L385.7298,94.4453" fill="none" style="stroke:#454645;stroke-width:1"/><path d="M127.9999,390.0039 L137.9999,390.0039 C152.9999,390.0039 152.9999,66.2969 167.9999,66.2969 L177.9999,66.2969" fill="none" style="stroke:#454645;stroke-width:1"/><rect fill="#F1F1F1" height="36.2969" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="89.4051" x="177.9999" y="329.6328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="69.4051" x="187.9999" y="352.6279">X86&#36719;&#23384;&#20648;</text><rect fill="#F1F1F1" height="36.2969" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="100.2606" x="317.405" y="132.5938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="80.2606" x="327.405" y="155.5889">&#22359;&#23384;&#20648;(EBS)</text><rect fill="#F1F1F1" height="36.2969" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="112.8662" x="467.6655" y="132.5938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="92.8662" x="477.6655" y="155.5889">Cinder(Ceph)</text><path d="M417.6655,150.7422 L427.6655,150.7422 C442.6655,150.7422 442.6655,150.7422 457.6655,150.7422 L467.6655,150.7422" fill="none" style="stroke:#454645;stroke-width:1"/><path d="M267.405,347.7813 L277.405,347.7813 C292.405,347.7813 292.405,150.7422 307.405,150.7422 L317.405,150.7422" fill="none" style="stroke:#454645;stroke-width:1"/><rect fill="#F1F1F1" height="36.2969" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="112.7087" x="317.405" y="217.0391"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="92.7087" x="327.405" y="240.0342">&#20849;&#20139;&#23384;&#20648;(EFS)</text><rect fill="#F1F1F1" height="36.2969" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="47.4121" x="480.1137" y="188.8906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="27.4121" x="490.1137" y="211.8857">NFS</text><path d="M430.1137,235.1875 L440.1137,235.1875 C455.1137,235.1875 455.1137,207.0391 470.1137,207.0391 L480.1137,207.0391" fill="none" style="stroke:#454645;stroke-width:1"/><rect fill="#F1F1F1" height="36.2969" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="136.2451" x="480.1137" y="245.1875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="116.2451" x="490.1137" y="268.1826">GlusterFS/Lustre</text><path d="M430.1137,235.1875 L440.1137,235.1875 C455.1137,235.1875 455.1137,263.3359 470.1137,263.3359 L480.1137,263.3359" fill="none" style="stroke:#454645;stroke-width:1"/><path d="M267.405,347.7813 L277.405,347.7813 C292.405,347.7813 292.405,235.1875 307.405,235.1875 L317.405,235.1875" fill="none" style="stroke:#454645;stroke-width:1"/><rect fill="#F1F1F1" height="36.2969" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="104.7175" x="317.405" y="414.0781"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="84.7175" x="327.405" y="437.0732">&#23545;&#35937;&#23384;&#20648;(S3)</text><rect fill="#F1F1F1" height="36.2969" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="59.9902" x="472.1225" y="301.4844"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="39.9902" x="482.1225" y="324.4795">MinIO</text><path d="M422.1225,432.2266 L432.1225,432.2266 C447.1225,432.2266 447.1225,319.6328 462.1225,319.6328 L472.1225,319.6328" fill="none" style="stroke:#454645;stroke-width:1"/><rect fill="#F1F1F1" height="36.2969" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="173.8223" x="472.1225" y="357.7813"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="153.8223" x="482.1225" y="380.7764">Ceph Object Storage&#61633;</text><path d="M422.1225,432.2266 L432.1225,432.2266 C447.1225,432.2266 447.1225,375.9297 462.1225,375.9297 L472.1225,375.9297" fill="none" style="stroke:#454645;stroke-width:1"/><rect fill="#F1F1F1" height="36.2969" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="128.0625" x="472.1225" y="414.0781"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="108.0625" x="482.1225" y="437.0732">OBS/swift(DHT)</text><path d="M422.1225,432.2266 L432.1225,432.2266 C447.1225,432.2266 447.1225,432.2266 462.1225,432.2266 L472.1225,432.2266" fill="none" style="stroke:#454645;stroke-width:1"/><rect fill="#F1F1F1" height="36.2969" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="126.7637" x="472.1225" y="470.375"/><a href="https://github.com/chrislusf/seaweedfs#compared-to-glusterfs-ceph" target="_top" title="https://github.com/chrislusf/seaweedfs#compared-to-glusterfs-ceph" xlink:actuate="onRequest" xlink:href="https://github.com/chrislusf/seaweedfs#compared-to-glusterfs-ceph" xlink:show="new" xlink:title="https://github.com/chrislusf/seaweedfs#compared-to-glusterfs-ceph" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" text-decoration="underline" textLength="106.7637" x="482.1225" y="493.3701">POSIX-backend</text></a><rect fill="#F1F1F1" height="36.2969" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="45.3818" x="648.8862" y="414.0781"/><a href="https://support.huaweicloud.com/productdesc-obs/obs_03_0150.html" target="_top" title="https://support.huaweicloud.com/productdesc-obs/obs_03_0150.html" xlink:actuate="onRequest" xlink:href="https://support.huaweicloud.com/productdesc-obs/obs_03_0150.html" xlink:show="new" xlink:title="https://support.huaweicloud.com/productdesc-obs/obs_03_0150.html" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" text-decoration="underline" textLength="25.3818" x="658.8862" y="437.0732">PFS</text></a><path d="M598.8862,488.5234 L608.8862,488.5234 C623.8862,488.5234 623.8862,432.2266 638.8862,432.2266 L648.8862,432.2266" fill="none" style="stroke:#454645;stroke-width:1"/><rect fill="#F1F1F1" height="36.2969" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="149.001" x="648.8862" y="470.375"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="129.001" x="658.8862" y="493.3701">JuiceFS(S3+Redis)</text><path d="M598.8862,488.5234 L608.8862,488.5234 C623.8862,488.5234 623.8862,488.5234 638.8862,488.5234 L648.8862,488.5234" fill="none" style="stroke:#454645;stroke-width:1"/><rect fill="#F1F1F1" height="36.2969" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="94.2725" x="648.8862" y="526.6719"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="74.2725" x="658.8862" y="549.667">seaweedfs</text><path d="M598.8862,488.5234 L608.8862,488.5234 C623.8862,488.5234 623.8862,544.8203 638.8862,544.8203 L648.8862,544.8203" fill="none" style="stroke:#454645;stroke-width:1"/><path d="M422.1225,432.2266 L432.1225,432.2266 C447.1225,432.2266 447.1225,488.5234 462.1225,488.5234 L472.1225,488.5234" fill="none" style="stroke:#454645;stroke-width:1"/><path d="M267.405,347.7813 L277.405,347.7813 C292.405,347.7813 292.405,432.2266 307.405,432.2266 L317.405,432.2266" fill="none" style="stroke:#454645;stroke-width:1"/><path d="M127.9999,390.0039 L137.9999,390.0039 C152.9999,390.0039 152.9999,347.7813 167.9999,347.7813 L177.9999,347.7813" fill="none" style="stroke:#454645;stroke-width:1"/><rect fill="#F1F1F1" height="36.2969" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="75.9998" x="177.9999" y="653.3398"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="55.9998" x="187.9999" y="676.335">&#23384;&#20648;&#32593;&#20851;</text><rect fill="#F1F1F1" height="36.2969" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="55.5674" x="303.9996" y="582.9688"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="35.5674" x="313.9996" y="605.9639">iSCSI</text><path d="M253.9996,671.4883 L263.9996,671.4883 C278.9996,671.4883 278.9996,601.1172 293.9996,601.1172 L303.9996,601.1172" fill="none" style="stroke:#454645;stroke-width:1"/><rect fill="#F1F1F1" height="36.2969" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="56.2305" x="303.9996" y="639.2656"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="36.2305" x="313.9996" y="662.2607">SANs</text><path d="M253.9996,671.4883 L263.9996,671.4883 C278.9996,671.4883 278.9996,657.4141 293.9996,657.4141 L303.9996,657.4141" fill="none" style="stroke:#454645;stroke-width:1"/><rect fill="#F1F1F1" height="36.2969" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="59.9902" x="303.9996" y="695.5625"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="39.9902" x="313.9996" y="718.5576">Cloud</text><rect fill="#F1F1F1" height="36.2969" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="185.6895" x="413.9899" y="667.4141"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="165.6895" x="423.9899" y="690.4092">Azure Storage Gateway</text><path d="M363.9899,713.7109 L373.9899,713.7109 C388.9899,713.7109 388.9899,685.5625 403.9899,685.5625 L413.9899,685.5625" fill="none" style="stroke:#454645;stroke-width:1"/><rect fill="#F1F1F1" height="36.2969" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="139.2734" x="413.9899" y="723.7109"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="119.2734" x="423.9899" y="746.7061">Azure HPC cache</text><path d="M363.9899,713.7109 L373.9899,713.7109 C388.9899,713.7109 388.9899,741.8594 403.9899,741.8594 L413.9899,741.8594" fill="none" style="stroke:#454645;stroke-width:1"/><path d="M253.9996,671.4883 L263.9996,671.4883 C278.9996,671.4883 278.9996,713.7109 293.9996,713.7109 L303.9996,713.7109" fill="none" style="stroke:#454645;stroke-width:1"/><path d="M127.9999,390.0039 L137.9999,390.0039 C152.9999,390.0039 152.9999,671.4883 167.9999,671.4883 L177.9999,671.4883" fill="none" style="stroke:#454645;stroke-width:1"/><path d="M43.9999,502.5977 L53.9999,502.5977 C68.9999,502.5977 68.9999,390.0039 83.9999,390.0039 L93.9999,390.0039" fill="none" style="stroke:#454645;stroke-width:1"/><rect fill="#F1F1F1" height="36.2969" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="113.6658" x="93.9999" y="808.1563"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="93.6658" x="103.9999" y="831.1514">&#25353;&#29031;cable&#20171;&#36136;</text><rect fill="#F1F1F1" height="36.2969" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="72.1445" x="257.6657" y="780.0078"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="52.1445" x="267.6657" y="803.0029">GE/IB&#32447;</text><path d="M207.6657,826.3047 L217.6657,826.3047 C232.6657,826.3047 232.6657,798.1563 247.6657,798.1563 L257.6657,798.1563" fill="none" style="stroke:#454645;stroke-width:1"/><rect fill="#F1F1F1" height="36.2969" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="131.2889" x="257.6657" y="836.3047"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="111.2889" x="267.6657" y="859.2998">Eth/RoCE/IB&#21327;&#35758;</text><path d="M207.6657,826.3047 L217.6657,826.3047 C232.6657,826.3047 232.6657,854.4531 247.6657,854.4531 L257.6657,854.4531" fill="none" style="stroke:#454645;stroke-width:1"/><path d="M43.9999,502.5977 L53.9999,502.5977 C68.9999,502.5977 68.9999,826.3047 83.9999,826.3047 L93.9999,826.3047" fill="none" style="stroke:#454645;stroke-width:1"/><rect fill="#F1F1F1" height="85.1875" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="33.9999" x="93.9999" y="896.3047"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="13.9999" x="103.9999" y="919.2998">&#21608;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="13.9999" x="103.9999" y="935.5967">&#36793;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="13.9999" x="103.9999" y="951.8936">&#37197;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="13.9999" x="103.9999" y="968.1904">&#22871;</text><rect fill="#F1F1F1" height="36.2969" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="75.9998" x="177.9999" y="892.6016"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="55.9998" x="187.9999" y="915.5967">&#26426;&#25151;&#26426;&#26588;</text><path d="M127.9999,938.8984 L137.9999,938.8984 C152.9999,938.8984 152.9999,910.75 167.9999,910.75 L177.9999,910.75" fill="none" style="stroke:#454645;stroke-width:1"/><rect fill="#F1F1F1" height="36.2969" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="75.9998" x="177.9999" y="948.8984"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="55.9998" x="187.9999" y="971.8936">&#20132;&#25442;&#26426;&#26694;</text><path d="M127.9999,938.8984 L137.9999,938.8984 C152.9999,938.8984 152.9999,967.0469 167.9999,967.0469 L177.9999,967.0469" fill="none" style="stroke:#454645;stroke-width:1"/><path d="M43.9999,502.5977 L53.9999,502.5977 C68.9999,502.5977 68.9999,938.8984 83.9999,938.8984 L93.9999,938.8984" fill="none" style="stroke:#454645;stroke-width:1"/></g></svg><p>存储设计通常是放在基础设施上实现的，需要专门的Infra工程师，而应用工程师一般接触不到。</p><p>真正的设计存储方案至少包含如下</p><ul><li>机房机柜：能源、散热、消防、安全、密度等</li><li>交换框：汇聚、接入、控制、管理；GE线</li><li>控制框：SDS、存储网关与专用硬件，SDN</li><li>机器：RAID、盘位、BMC、Health</li><li>协议：Shard、主从选举、Heard-beat等</li></ul><p>如果想更深入了解，可以优先看下Top厂商的产品介绍/Support资料，大致就能明白了。比如<a target="_blank" rel="noopener" href="https://support-it.huawei.com/storage/docs/zh-cn/oceanstor-100d-8.0.3/network-planning-guide/net_plan_000027.html">这里</a>是来自Huawei的40GE的物理方案</p><p>这个领域非常复杂而且需要经验，尤其是主备切换的单点故障细节真的多，往往定位需要一天。</p><h2>存算分离</h2><p>所谓的存算分离，一般指计算节点的系统数据盘通过存储专用光纤连接存储池。</p><h4>VM/云方案</h4><p>VM可以利用远端存储池实现直接RDMA对接VM软件，VM再分配给具体的OS，一般采用Cinder+SDN的方案</p><p>可以参考<a target="_blank" rel="noopener" href="https://support.huawei.com/enterprise/zh/doc/EDOC1100115164">这篇</a>文章</p><h4>裸金属物理部署方案</h4><p>OS需要安装在本地，计算数据通过GE/IB线进行直连，实现存算分离，这个的确是紧耦合方案。</p><h2>CSI</h2><p>在应用侧，可以直接挂载磁盘或者使用<a target="_blank" rel="noopener" href="https://kubernetes-csi.github.io/docs/introduction.html">Container Storage Interface (CSI)</a> 来进行wrapper</p><h4>对硬件/云的wrapper</h4><p>比如FusionStorage/CCE提供了K8S的CSI服务，这个没啥毛病</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">FusionStorage/CCE -&gt; CSI -&gt; Kubenetes</span><br></pre></td></tr></table></figure><h4>用户态分布式存储</h4><p>这种用户态wrapper的设计其实对应用开发者来说挺鸡肋的，需要跳过FS抽象，并掌握三种技术栈（硬件、CSI、SDS），比如IOMesh要求在每台机器上都要安装磁盘、应用并依赖k8s。</p><ul><li>没有运维能力的开发者，还不如用云硬盘/NFS，或者直接集成S3的SDK</li><li>有运维能力的开发者，必定不敢接这种锅，因为硬盘不归你管，权责不清晰；分散硬件过于繁琐。</li><li>有非常强运维能力的开发者，用高速网线连接集中式硬件存储多香</li></ul><h2>应用层与Local存储</h2><p>业务应用层一般不会实现过于复杂，而是简单的本地切片，比如</p><ul><li>Gitlab代码仓库有两层分片：<ul><li>第一层通过Map结构<code>[key: mountPoint]</code>作为物理挂载点的切片（并存储key到projects表），这种方案不涉及算法，需要人工经验进行分配。</li><li>第二次切片通过sha256(projectId)进行分发。</li></ul></li><li>SVN代码仓库同上，需要在Apache的httpd.conf进行人工经验配置，基于文本存储切片数据</li><li>高级供应商MultiSite为Git/SVN的文件系统进行了二次定制，基于PAXO实现了跨广域网的共识</li></ul><h2>存储的备份</h2><ul><li>Storage hardware level: AWS EBS backup, AWS Global database, NetApp’s snapshot.</li><li>File System level: rsync, tar, restic</li><li>Application level<ul><li>dump &amp; load snapshots: pg_dump, git bundle</li><li>incremental</li></ul></li></ul></div><div class="tags"><a class="tag-link" href="/tags/IaaS/" rel="tag">IaaS</a><a class="tag-link" href="/tags/Storage/" rel="tag">Storage</a></div></section><div class="comments no-print"><noscript>Please enable JavaScript to view comments.</noscript><script async src="https://giscus.app/client.js" data-repo="miao1007/miao1007.github.io" data-repo-id="MDEwOlJlcG9zaXRvcnkxMzA1NTY1MDU=" data-category="General" data-category-id="DIC_kwDOB8giWc4COaTx" data-mapping="url" data-reactions-enabled="0" data-emit-metadata="0" data-input-position="bottom" data-theme="light" data-lang="en" data-loading="lazy" crossorigin="anonymous"></script></div></div></div><footer class="no-print"><div class="rights"><a href="/feed.xml" rel="external nofollow">RSS</a><span>, Theme </span><a href="https://github.com/gary-Shen/hexo-theme-bear" rel="external nofollow" target="_blank">Curry.</a><span> All contents are not allowed to be redistributed or synthesised without an explicit permission.</span></div></footer></div></body></html>