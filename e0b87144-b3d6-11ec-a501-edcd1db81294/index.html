<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="description" content="当前作为项目SE，长期进行技术选型和设计工作，特此分享开源或第三方软件的选择流程。"><meta name="keyword" content="System Design"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no"><meta http-equiv="X-UA-Compatible" content="IE=edge"><title>开源项目选型流程分享</title><link rel="icon" href="data:image/svg+xml,%3Csvg width='24' height='28' xmlns='http://www.w3.org/2000/svg'%3E%3Ctext font-size='24' y='24'%3E諺%3C/text%3E%3C/svg%3E" type="image/x-icon"><link href="/styles/site.css" rel="stylesheet"><script async src="https://www.googletagmanager.com/gtag/js?id=UA-102296742-1"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-102296742-1")</script><meta name="generator" content="Hexo 5.4.0"></head><body><header><div class="header no-print"><div class="header-container"><div class="header-left"><a href="/">諺</a></div><ul class="header-right"><li><a href="/archives">Archives</a></li><li><a href="/tags" rel="nofollow">Tags</a></li><li><a href="/about" rel="nofollow">About</a></li><li><a href="/epistemology" rel="nofollow">認識論</a></li><li><a href="/books" rel="nofollow">読書</a></li><li><a href="/archives" rel="nofollow">zh</a><a href="#" rel="nofollow">/</a><a href="/en" rel="nofollow">en</a></li></ul></div></div></header><div class="container"><div class="content-wrapper"><div class="post"><section class="article"><div class="title">开源项目选型流程分享</div><div class="date">2021-09-25 / modified at 2022-09-11</div><div class="content"><p>当前作为项目SE，长期进行技术选型和设计工作，特此分享开源或第三方软件的选择流程。</p><span id="more"></span><p>核心原则是连续性优先，低复杂性优先，再考虑性能与功能。</p><h2>License协议</h2><p>慎重选择，咨询法务。</p><h2>常见第三方或开源软件的封装设计</h2><p>下面的导图为个人整理</p><p>业务维度如下，最终实现自己的平台可以随时替换开源软件的版本/实现。</p> <?xml version="1.0" encoding="us-ascii" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="641px" preserveAspectRatio="none" style="width:823px;height:641px;background:#fff" version="1.1" viewBox="0 0 823 641" width="823px" zoomAndPan="magnify" class="kroki">$2<defs/><g><rect fill="#F1F1F1" height="36.2969" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="76" x="10" y="301.4844"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56" x="20" y="324.4795">&#19994;&#21153;&#23553;&#35013;</text><rect fill="#F1F1F1" height="52.5938" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="100" x="136" y="68.1484"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="28" x="146" y="91.1436">&#37492;&#26435;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="80" x="146" y="107.4404">(&#35777;&#26126;&#20320;&#26159;&#20320;)</text><rect fill="#F1F1F1" height="36.2969" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="107" x="286" y="20"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="87" x="296" y="42.9951">forward-auth</text><rect fill="#F1F1F1" height="36.2969" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="146" x="443" y="20"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="126" x="453" y="42.9951">traefik-middleware</text><path d="M393,38.1484 L403,38.1484 C418,38.1484 418,38.1484 433,38.1484 L443,38.1484 " fill="none" style="stroke:#454645;stroke-width:1"/><path d="M236,94.4453 L246,94.4453 C261,94.4453 261,38.1484 276,38.1484 L286,38.1484 " fill="none" style="stroke:#454645;stroke-width:1"/><rect fill="#F1F1F1" height="36.2969" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="91" x="286" y="104.4453"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="71" x="296" y="127.4404">SSO/SAML</text><rect fill="#F1F1F1" height="36.2969" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="56" x="427" y="76.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="36" x="437" y="99.292">LDAP</text><path d="M377,122.5938 L387,122.5938 C402,122.5938 402,94.4453 417,94.4453 L427,94.4453 " fill="none" style="stroke:#454645;stroke-width:1"/><rect fill="#F1F1F1" height="36.2969" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="40" x="427" y="132.5938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="20" x="437" y="155.5889">AD</text><path d="M377,122.5938 L387,122.5938 C402,122.5938 402,150.7422 417,150.7422 L427,150.7422 " fill="none" style="stroke:#454645;stroke-width:1"/><path d="M236,94.4453 L246,94.4453 C261,94.4453 261,122.5938 276,122.5938 L286,122.5938 " fill="none" style="stroke:#454645;stroke-width:1"/><path d="M86,319.6328 L96,319.6328 C111,319.6328 111,94.4453 126,94.4453 L136,94.4453 " fill="none" style="stroke:#454645;stroke-width:1"/><rect fill="#F1F1F1" height="52.5938" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="114" x="136" y="293.3359"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="68" x="146" y="316.3311">&#26435;&#38480;Authz</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="94" x="146" y="332.6279">(&#20320;&#33021;&#35775;&#38382;&#20160;&#20040;)</text><rect fill="#F1F1F1" height="36.2969" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="120" x="300" y="217.0391"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="100" x="310" y="240.0342">Policy-as-code</text><rect fill="#F1F1F1" height="36.2969" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="176" x="470" y="188.8906"/><a href="https://www.jfrog.com/confluence/display/JFROG/Permissions" target="_top" title="https://www.jfrog.com/confluence/display/JFROG/Permissions" xlink:actuate="onRequest" xlink:href="https://www.jfrog.com/confluence/display/JFROG/Permissions" xlink:show="new" xlink:title="https://www.jfrog.com/confluence/display/JFROG/Permissions" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" text-decoration="underline" textLength="156" x="480" y="211.8857">PermssionTarget-JSON</text></a><path d="M420,235.1875 L430,235.1875 C445,235.1875 445,207.0391 460,207.0391 L470,207.0391 " fill="none" style="stroke:#454645;stroke-width:1"/><rect fill="#F1F1F1" height="36.2969" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="49" x="470" y="245.1875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="29" x="480" y="268.1826">OPA</text><path d="M420,235.1875 L430,235.1875 C445,235.1875 445,263.3359 460,263.3359 L470,263.3359 " fill="none" style="stroke:#454645;stroke-width:1"/><path d="M250,319.6328 L260,319.6328 C275,319.6328 275,235.1875 290,235.1875 L300,235.1875 " fill="none" style="stroke:#454645;stroke-width:1"/><rect fill="#F1F1F1" height="36.2969" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="173" x="300" y="301.4844"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="153" x="310" y="324.4795">Tenant or Namespace</text><path d="M250,319.6328 L260,319.6328 C275,319.6328 275,319.6328 290,319.6328 L300,319.6328 " fill="none" style="stroke:#454645;stroke-width:1"/><rect fill="#F1F1F1" height="36.2969" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="78" x="300" y="385.9297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="58" x="310" y="408.9248">Wrapper</text><rect fill="#F1F1F1" height="36.2969" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="99" x="428" y="357.7813"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="79" x="438" y="380.7764">full wrapper</text><rect fill="#F1F1F1" height="36.2969" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="149" x="577" y="357.7813"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="129" x="587" y="380.7764">eg: redash/jenkins</text><path d="M527,375.9297 L537,375.9297 C552,375.9297 552,375.9297 567,375.9297 L577,375.9297 " fill="none" style="stroke:#454645;stroke-width:1"/><path d="M378,404.0781 L388,404.0781 C403,404.0781 403,375.9297 418,375.9297 L428,375.9297 " fill="none" style="stroke:#454645;stroke-width:1"/><rect fill="#F1F1F1" height="36.2969" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="97" x="428" y="414.0781"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="77" x="438" y="437.0732">group sync</text><rect fill="#F1F1F1" height="36.2969" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="236" x="575" y="414.0781"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="216" x="585" y="437.0732">eg: sonarqube/artifactory/gitlab</text><path d="M525,432.2266 L535,432.2266 C550,432.2266 550,432.2266 565,432.2266 L575,432.2266 " fill="none" style="stroke:#454645;stroke-width:1"/><path d="M378,404.0781 L388,404.0781 C403,404.0781 403,432.2266 418,432.2266 L428,432.2266 " fill="none" style="stroke:#454645;stroke-width:1"/><path d="M250,319.6328 L260,319.6328 C275,319.6328 275,404.0781 290,404.0781 L300,404.0781 " fill="none" style="stroke:#454645;stroke-width:1"/><path d="M86,319.6328 L96,319.6328 C111,319.6328 111,319.6328 126,319.6328 L136,319.6328 " fill="none" style="stroke:#454645;stroke-width:1"/><rect fill="#F1F1F1" height="36.2969" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="95" x="136" y="498.5234"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="75" x="146" y="521.5186">API Facade</text><rect fill="#F1F1F1" height="36.2969" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="146" x="281" y="470.375"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="126" x="291" y="493.3701">&#23613;&#21487;&#33021;&#20351;&#29992;&#20107;&#23454;&#26631;&#20934;</text><rect fill="#F1F1F1" height="36.2969" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="177" x="477" y="470.375"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="157" x="487" y="493.3701">eg: OpenTelemetry/S3</text><path d="M427,488.5234 L437,488.5234 C452,488.5234 452,488.5234 467,488.5234 L477,488.5234 " fill="none" style="stroke:#454645;stroke-width:1"/><path d="M231,516.6719 L241,516.6719 C256,516.6719 256,488.5234 271,488.5234 L281,488.5234 " fill="none" style="stroke:#454645;stroke-width:1"/><rect fill="#F1F1F1" height="36.2969" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="151" x="281" y="526.6719"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="131" x="291" y="549.667">&#23631;&#34109;&#38750;&#26631;&#20934;&#35821;&#27861;/&#21327;&#35758;</text><rect fill="#F1F1F1" height="36.2969" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="226" x="482" y="526.6719"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="206" x="492" y="549.667">eg: jenkins groovy dsl -&gt; yaml</text><path d="M432,544.8203 L442,544.8203 C457,544.8203 457,544.8203 472,544.8203 L482,544.8203 " fill="none" style="stroke:#454645;stroke-width:1"/><path d="M231,516.6719 L241,516.6719 C256,516.6719 256,544.8203 271,544.8203 L281,544.8203 " fill="none" style="stroke:#454645;stroke-width:1"/><path d="M86,319.6328 L96,319.6328 C111,319.6328 111,516.6719 126,516.6719 L136,516.6719 " fill="none" style="stroke:#454645;stroke-width:1"/><rect fill="#F1F1F1" height="36.2969" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="90" x="136" y="582.9688"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="70" x="146" y="605.9639">&#38544;&#31169;&#19982;&#23457;&#35745;</text><rect fill="#F1F1F1" height="36.2969" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="105" x="276" y="582.9688"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="85" x="286" y="605.9639">&#24120;&#35265;AOP&#26041;&#26696;</text><path d="M226,601.1172 L236,601.1172 C251,601.1172 251,601.1172 266,601.1172 L276,601.1172 " fill="none" style="stroke:#454645;stroke-width:1"/><path d="M86,319.6328 L96,319.6328 C111,319.6328 111,601.1172 126,601.1172 L136,601.1172 " fill="none" style="stroke:#454645;stroke-width:1"/></g></svg><p>上述设计并没有唯一标准，而是建议参考学习开源且部分收费的项目（比如metabase，sentry，sonarqube）等系统设计。而且如果你希望项目速度快速度过EAP，尽可能采用缝合怪的形式进行包装。</p><p>比较容易的方案是基于Sidecar的思路去实现前置代理，将开源软件的安全/可用性/协议问题通过Socket进行封装，屏蔽业务系统对开源组件的直接侵入。</p><p>组网与技术维度</p> <?xml version="1.0" encoding="us-ascii" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="786px" preserveAspectRatio="none" style="width:669px;height:786px;background:#fff" version="1.1" viewBox="0 0 669 786" width="669px" zoomAndPan="magnify" class="kroki">$2<defs/><g><rect fill="#F1F1F1" height="36.2969" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="76" x="10" y="374.0781"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56" x="20" y="397.0732">&#32452;&#32593;&#32500;&#24230;</text><rect fill="#F1F1F1" height="36.2969" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="90" x="136" y="20"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="70" x="146" y="42.9951">&#37096;&#32626;&#31616;&#27905;&#24615;</text><rect fill="#F1F1F1" height="36.2969" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="230" x="276" y="20"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="210" x="286" y="42.9951">&#23613;&#21487;&#33021;&#25353;&#29031;&#31169;&#26377;&#37096;&#32626;&#30340;&#24605;&#36335;&#20570;&#36719;&#20214;</text><path d="M226,38.1484 L236,38.1484 C251,38.1484 251,38.1484 266,38.1484 L276,38.1484 " fill="none" style="stroke:#454645;stroke-width:1"/><path d="M86,392.2266 L96,392.2266 C111,392.2266 111,38.1484 126,38.1484 L136,38.1484 " fill="none" style="stroke:#454645;stroke-width:1"/><rect fill="#F1F1F1" height="36.2969" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="118" x="136" y="188.8906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="98" x="146" y="211.8857">&#20887;&#20313;&#19982;&#36335;&#30001;&#26041;&#26696;</text><rect fill="#F1F1F1" height="36.2969" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="146" x="304" y="76.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="126" x="314" y="99.292">&#21333;&#26426;&#65288;&#20063;&#21487;&#20197;&#25509;&#21463;&#65289;</text><path d="M254,207.0391 L264,207.0391 C279,207.0391 279,94.4453 294,94.4453 L304,94.4453 " fill="none" style="stroke:#454645;stroke-width:1"/><rect fill="#F1F1F1" height="36.2969" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="118" x="304" y="132.5938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="98" x="314" y="155.5889">&#26080;&#29366;&#24577;&#65288;&#25512;&#33616;&#65289;</text><path d="M254,207.0391 L264,207.0391 C279,207.0391 279,150.7422 294,150.7422 L304,150.7422 " fill="none" style="stroke:#454645;stroke-width:1"/><rect fill="#F1F1F1" height="36.2969" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="245" x="304" y="188.8906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="225" x="314" y="211.8857">&#20999;&#29255;+RaftKV&#65288;&#20294;&#35201;&#36991;&#20813;&#36807;&#24230;&#35774;&#35745;&#65289;</text><path d="M254,207.0391 L264,207.0391 C279,207.0391 279,207.0391 294,207.0391 L304,207.0391 " fill="none" style="stroke:#454645;stroke-width:1"/><rect fill="#F1F1F1" height="36.2969" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="202" x="304" y="245.1875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="182" x="314" y="268.1826">&#26080;&#20013;&#24515;&#65288;&#38590;&#24230;&#39640;&#65292;&#38590;&#20197;&#24230;&#37327;&#65289;</text><path d="M254,207.0391 L264,207.0391 C279,207.0391 279,263.3359 294,263.3359 L304,263.3359 " fill="none" style="stroke:#454645;stroke-width:1"/><rect fill="#F1F1F1" height="36.2969" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="212" x="304" y="301.4844"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="192" x="314" y="324.4795">&#20027;&#22791;&#65288;&#19981;&#25512;&#33616;&#65292;ROI&#19968;&#33324;&#24456;&#20302;&#65289;</text><path d="M254,207.0391 L264,207.0391 C279,207.0391 279,319.6328 294,319.6328 L304,319.6328 " fill="none" style="stroke:#454645;stroke-width:1"/><path d="M86,392.2266 L96,392.2266 C111,392.2266 111,207.0391 126,207.0391 L136,207.0391 " fill="none" style="stroke:#454645;stroke-width:1"/><rect fill="#F1F1F1" height="36.2969" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="76" x="136" y="442.2266"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56" x="146" y="465.2217">&#20581;&#24247;&#26816;&#27979;</text><rect fill="#F1F1F1" height="36.2969" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="76" x="262" y="357.7813"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56" x="272" y="380.7764">&#24515;&#36339;&#26816;&#26597;</text><rect fill="#F1F1F1" height="36.2969" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="131" x="388" y="357.7813"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="111" x="398" y="380.7764">HTTP Code/TCP</text><path d="M338,375.9297 L348,375.9297 C363,375.9297 363,375.9297 378,375.9297 L388,375.9297 " fill="none" style="stroke:#454645;stroke-width:1"/><path d="M212,460.375 L222,460.375 C237,460.375 237,375.9297 252,375.9297 L262,375.9297 " fill="none" style="stroke:#454645;stroke-width:1"/><rect fill="#F1F1F1" height="36.2969" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="167" x="262" y="470.375"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="147" x="272" y="493.3701">APM(OpenTelemetry)</text><rect fill="#F1F1F1" height="36.2969" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="55" x="479" y="414.0781"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="35" x="489" y="437.0732">Span</text><path d="M429,488.5234 L439,488.5234 C454,488.5234 454,432.2266 469,432.2266 L479,432.2266 " fill="none" style="stroke:#454645;stroke-width:1"/><rect fill="#F1F1F1" height="36.2969" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="53" x="479" y="470.375"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="33" x="489" y="493.3701">Logs</text><path d="M429,488.5234 L439,488.5234 C454,488.5234 454,488.5234 469,488.5234 L479,488.5234 " fill="none" style="stroke:#454645;stroke-width:1"/><rect fill="#F1F1F1" height="36.2969" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="178" x="479" y="526.6719"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="158" x="489" y="549.667">Metrics(&#21547;&#32593;&#20851;&#27969;&#37327;&#26816;&#26597;)</text><path d="M429,488.5234 L439,488.5234 C454,488.5234 454,544.8203 469,544.8203 L479,544.8203 " fill="none" style="stroke:#454645;stroke-width:1"/><path d="M212,460.375 L222,460.375 C237,460.375 237,488.5234 252,488.5234 L262,488.5234 " fill="none" style="stroke:#454645;stroke-width:1"/><path d="M86,392.2266 L96,392.2266 C111,392.2266 111,460.375 126,460.375 L136,460.375 " fill="none" style="stroke:#454645;stroke-width:1"/><rect fill="#F1F1F1" height="36.2969" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="76" x="136" y="655.5625"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56" x="146" y="678.5576">&#26356;&#26032;&#31574;&#30053;</text><rect fill="#F1F1F1" height="36.2969" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="116" x="262" y="591.1172"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="96" x="272" y="614.1123">RollingUpdate</text><rect fill="#F1F1F1" height="52.5938" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="205" x="428" y="582.9688"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="47" x="438" y="605.9639">Canary</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="185" x="438" y="622.2607">(By selector&#65292;&#25512;&#33616;&#36825;&#37324;&#23450;&#21046;)</text><path d="M378,609.2656 L388,609.2656 C403,609.2656 403,609.2656 418,609.2656 L428,609.2656 " fill="none" style="stroke:#454645;stroke-width:1"/><path d="M212,673.7109 L222,673.7109 C237,673.7109 237,609.2656 252,609.2656 L262,609.2656 " fill="none" style="stroke:#454645;stroke-width:1"/><rect fill="#F1F1F1" height="52.5938" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="132" x="262" y="655.5625"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="63" x="272" y="678.5576">Recreate</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="112" x="272" y="694.8545">(With downtime)</text><path d="M212,673.7109 L222,673.7109 C237,673.7109 237,681.8594 252,681.8594 L262,681.8594 " fill="none" style="stroke:#454645;stroke-width:1"/><rect fill="#F1F1F1" height="36.2969" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="155" x="262" y="728.1563"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="135" x="272" y="751.1514">Security: Key-rotate</text><path d="M212,673.7109 L222,673.7109 C237,673.7109 237,746.3047 252,746.3047 L262,746.3047 " fill="none" style="stroke:#454645;stroke-width:1"/><path d="M86,392.2266 L96,392.2266 C111,392.2266 111,673.7109 126,673.7109 L136,673.7109 " fill="none" style="stroke:#454645;stroke-width:1"/></g></svg><h2>持续性</h2><h4>简单优先</h4><p>比如在进行私有APM工具选型时，我们发现Sentry是业界Top的APM软件。然而即使它非常优秀，技术架构完美，有上百个专业的全职雇员和成熟社区，但是它实在太复杂了（29个微服务，接近上百个表），导致引入生产环境后，没人敢兜底，最终选型被否决。</p><h4>社区BCM</h4><p>尽可能选择有赞助的社区或者公司，要求它能贯穿整个软件的生命周期</p><h4>版本元数据与漏洞</h4><ul><li>建议订阅各种RSS与dependency-bot对齐最新版本，比如fossa等工具</li><li>尽可能选择LTS版本，除非你需要的特性正在开发中</li></ul><h4>避免供应商锁定</h4><p>一般采用Wrapper/sidecar进行隔离（从RPC到Common库隔离都可以，尤其注意业务前端侧的API接口不要直接用开源实现，而要封装一层。当你的软件后期想对外卖，而相关协议比较严格（比如BSL，X-Pack）的开源软件希望去掉时就比较痛苦了。同时还有安全加固的作用，限制可以传递的参数。</p></div><div class="tags"><a class="tag-link" href="/tags/System-Design/" rel="tag">System Design</a></div></section><div class="comments no-print"><noscript>Please enable JavaScript to view comments.</noscript><script async src="https://giscus.app/client.js" data-repo="miao1007/miao1007.github.io" data-repo-id="MDEwOlJlcG9zaXRvcnkxMzA1NTY1MDU=" data-category="General" data-category-id="DIC_kwDOB8giWc4COaTx" data-mapping="url" data-reactions-enabled="0" data-emit-metadata="0" data-input-position="bottom" data-theme="light" data-lang="en" crossorigin="anonymous"></script></div></div></div><footer class="no-print"><div class="rights"><a href="/feed.xml" rel="external nofollow">RSS</a><span>, Theme </span><a href="https://github.com/gary-Shen/hexo-theme-bear" rel="external nofollow" target="_blank">Curry</a><span>.</span></div></footer></div></body></html>