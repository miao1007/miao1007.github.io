<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="description" content="当前作为项目SE，长期进行技术选型和设计工作，特此分享开源或第三方软件的选择流程。"><meta name="keyword" content="System Design"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no"><meta http-equiv="X-UA-Compatible" content="IE=edge"><title>开源项目选型流程分享</title><link rel="icon" href="data:image/svg+xml,%3Csvg width='24' height='28' xmlns='http://www.w3.org/2000/svg'%3E%3Ctext font-size='24' y='24'%3E諺%3C/text%3E%3C/svg%3E" type="image/x-icon"><link href="/styles/site.css" rel="stylesheet"><script async src="https://eu.umami.is/script.js" data-website-id="449a84b6-be9e-49de-a4cc-e0fa6fea1df9"></script><meta name="generator" content="Hexo 6.3.0"></head><body><header><div class="header no-print"><div class="header-container"><div class="header-left"><a href="/">諺</a></div><ul class="header-right"><li><a href="/archives">Archives</a></li><li><a href="/tags" rel="nofollow">Tags</a></li><li><a href="/about" rel="nofollow">About</a></li><li><a href="/epistemology" rel="nofollow">認識論</a></li><li><a href="/books" rel="nofollow">読書</a></li><li><a href="/archives" rel="nofollow">zh</a><a href="#" rel="nofollow">/</a><a href="/en" rel="nofollow">en</a></li></ul></div></div></header><div class="container"><div class="content-wrapper"><div class="post"><section class="article"><div class="title">开源项目选型流程分享</div><div class="date no-print">2021-09-25 / modified at 2024-02-13 / 876 words / 3 mins</div><div class="content"><blockquote><span>️This article has been <strong>over 1 years</strong> since the last update.</span></blockquote><p>当前作为项目SE，长期进行技术选型和设计工作，特此分享开源或第三方软件的选择流程。</p><span id="more"></span><p>核心原则是连续性优先，低复杂性优先，再考虑性能与功能。</p><h2>License协议</h2><p>慎重选择，咨询法务。重点</p><ul><li><p>开源：“source available”不等于免费使用</p></li><li><p>BSL：危险协议，其中的“commercially competitive version”难以定义，比如HashiCorp，MariaDB。这种基本上会被法务给拒绝掉。</p></li></ul><h2>常见第三方或开源软件的封装设计</h2><p>下面的导图为个人整理</p><p>业务维度如下，最终实现自己的平台可以随时替换开源软件的版本/实现。</p><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="MINDMAP" height="753px" preserveAspectRatio="none" style="width:833px;height:753px;background:#fff" version="1.1" viewBox="0 0 833 753" width="833px" zoomAndPan="magnify" class="kroki">$2<defs/><g><rect fill="#F1F1F1" height="36.2969" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="75.9998" x="10" y="357.7813"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="55.9998" x="20" y="380.7764">&#19994;&#21153;&#23553;&#35013;</text><rect fill="#F1F1F1" height="52.5938" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="100.9235" x="135.9998" y="68.1484"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="27.9999" x="145.9998" y="91.1436">&#37492;&#26435;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="80.9235" x="145.9998" y="107.4404">(&#35777;&#26126;&#20320;&#26159;&#20320;)</text><rect fill="#F1F1F1" height="36.2969" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="110.7881" x="286.9233" y="20"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="90.7881" x="296.9233" y="42.9951">forward-auth</text><rect fill="#F1F1F1" height="36.2969" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="152.6172" x="447.7114" y="20"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="132.6172" x="457.7114" y="42.9951">traefik-middleware</text><path d="M397.7114,38.1484 L407.7114,38.1484 C422.7114,38.1484 422.7114,38.1484 437.7114,38.1484 L447.7114,38.1484" fill="none" style="stroke:#454645;stroke-width:1"/><path d="M236.9233,94.4453 L246.9233,94.4453 C261.9233,94.4453 261.9233,38.1484 276.9233,38.1484 L286.9233,38.1484" fill="none" style="stroke:#454645;stroke-width:1"/><rect fill="#F1F1F1" height="36.2969" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="91.8525" x="286.9233" y="104.4453"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="71.8525" x="296.9233" y="127.4404">SSO/SAML</text><rect fill="#F1F1F1" height="36.2969" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="56.5996" x="428.7758" y="76.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="36.5996" x="438.7758" y="99.292">LDAP</text><path d="M378.7758,122.5938 L388.7758,122.5938 C403.7758,122.5938 403.7758,94.4453 418.7758,94.4453 L428.7758,94.4453" fill="none" style="stroke:#454645;stroke-width:1"/><rect fill="#F1F1F1" height="36.2969" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="40.3574" x="428.7758" y="132.5938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="20.3574" x="438.7758" y="155.5889">AD</text><path d="M378.7758,122.5938 L388.7758,122.5938 C403.7758,122.5938 403.7758,150.7422 418.7758,150.7422 L428.7758,150.7422" fill="none" style="stroke:#454645;stroke-width:1"/><path d="M236.9233,94.4453 L246.9233,94.4453 C261.9233,94.4453 261.9233,122.5938 276.9233,122.5938 L286.9233,122.5938" fill="none" style="stroke:#454645;stroke-width:1"/><path d="M85.9998,375.9297 L95.9998,375.9297 C110.9998,375.9297 110.9998,94.4453 125.9998,94.4453 L135.9998,94.4453" fill="none" style="stroke:#454645;stroke-width:1"/><rect fill="#F1F1F1" height="52.5938" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="114.9235" x="135.9998" y="293.3359"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="68.161" x="145.9998" y="316.3311">&#26435;&#38480;Authz</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="94.9235" x="145.9998" y="332.6279">(&#20320;&#33021;&#35775;&#38382;&#20160;&#20040;)</text><rect fill="#F1F1F1" height="36.2969" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="120.5088" x="300.9232" y="217.0391"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="100.5088" x="310.9232" y="240.0342">Policy-as-code</text><rect fill="#F1F1F1" height="36.2969" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="177.8008" x="471.432" y="188.8906"/><a href="https://www.jfrog.com/confluence/display/JFROG/Permissions" target="_top" title="https://www.jfrog.com/confluence/display/JFROG/Permissions" xlink:actuate="onRequest" xlink:href="https://www.jfrog.com/confluence/display/JFROG/Permissions" xlink:show="new" xlink:title="https://www.jfrog.com/confluence/display/JFROG/Permissions" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" text-decoration="underline" textLength="157.8008" x="481.432" y="211.8857">PermssionTarget-JSON</text></a><path d="M421.432,235.1875 L431.432,235.1875 C446.432,235.1875 446.432,207.0391 461.432,207.0391 L471.432,207.0391" fill="none" style="stroke:#454645;stroke-width:1"/><rect fill="#F1F1F1" height="36.2969" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="49.0391" x="471.432" y="245.1875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="29.0391" x="481.432" y="268.1826">OPA</text><path d="M421.432,235.1875 L431.432,235.1875 C446.432,235.1875 446.432,263.3359 461.432,263.3359 L471.432,263.3359" fill="none" style="stroke:#454645;stroke-width:1"/><path d="M250.9232,319.6328 L260.9232,319.6328 C275.9232,319.6328 275.9232,235.1875 290.9232,235.1875 L300.9232,235.1875" fill="none" style="stroke:#454645;stroke-width:1"/><rect fill="#F1F1F1" height="36.2969" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="174.5742" x="300.9232" y="301.4844"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="154.5742" x="310.9232" y="324.4795">Tenant or Namespace</text><path d="M250.9232,319.6328 L260.9232,319.6328 C275.9232,319.6328 275.9232,319.6328 290.9232,319.6328 L300.9232,319.6328" fill="none" style="stroke:#454645;stroke-width:1"/><rect fill="#F1F1F1" height="36.2969" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="80.3203" x="300.9232" y="385.9297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="60.3203" x="310.9232" y="408.9248">Wrapper</text><rect fill="#F1F1F1" height="36.2969" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="103.959" x="431.2435" y="357.7813"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="83.959" x="441.2435" y="380.7764">full wrapper</text><rect fill="#F1F1F1" height="36.2969" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="148.9258" x="585.2025" y="357.7813"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="128.9258" x="595.2025" y="380.7764">eg: redash/jenkins</text><path d="M535.2025,375.9297 L545.2025,375.9297 C560.2025,375.9297 560.2025,375.9297 575.2025,375.9297 L585.2025,375.9297" fill="none" style="stroke:#454645;stroke-width:1"/><path d="M381.2435,404.0781 L391.2435,404.0781 C406.2435,404.0781 406.2435,375.9297 421.2435,375.9297 L431.2435,375.9297" fill="none" style="stroke:#454645;stroke-width:1"/><rect fill="#F1F1F1" height="36.2969" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="97.5674" x="431.2435" y="414.0781"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="77.5674" x="441.2435" y="437.0732">group sync</text><rect fill="#F1F1F1" height="36.2969" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="243.0635" x="578.8109" y="414.0781"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="223.0635" x="588.8109" y="437.0732">eg: sonarqube/artifactory/gitlab</text><path d="M528.8109,432.2266 L538.8109,432.2266 C553.8109,432.2266 553.8109,432.2266 568.8109,432.2266 L578.8109,432.2266" fill="none" style="stroke:#454645;stroke-width:1"/><path d="M381.2435,404.0781 L391.2435,404.0781 C406.2435,404.0781 406.2435,432.2266 421.2435,432.2266 L431.2435,432.2266" fill="none" style="stroke:#454645;stroke-width:1"/><path d="M250.9232,319.6328 L260.9232,319.6328 C275.9232,319.6328 275.9232,404.0781 290.9232,404.0781 L300.9232,404.0781" fill="none" style="stroke:#454645;stroke-width:1"/><path d="M85.9998,375.9297 L95.9998,375.9297 C110.9998,375.9297 110.9998,319.6328 125.9998,319.6328 L135.9998,319.6328" fill="none" style="stroke:#454645;stroke-width:1"/><rect fill="#F1F1F1" height="36.2969" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="97.0068" x="135.9998" y="526.6719"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="77.0068" x="145.9998" y="549.667">API Facade</text><rect fill="#F1F1F1" height="36.2969" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="145.9995" x="283.0066" y="470.375"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="125.9995" x="293.0066" y="493.3701">&#23613;&#21487;&#33021;&#20351;&#29992;&#20107;&#23454;&#26631;&#20934;</text><rect fill="#F1F1F1" height="36.2969" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="178.0195" x="479.006" y="470.375"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="158.0195" x="489.006" y="493.3701">eg: OpenTelemetry/S3</text><path d="M429.006,488.5234 L439.006,488.5234 C454.006,488.5234 454.006,488.5234 469.006,488.5234 L479.006,488.5234" fill="none" style="stroke:#454645;stroke-width:1"/><path d="M233.0066,544.8203 L243.0066,544.8203 C258.0066,544.8203 258.0066,488.5234 273.0066,488.5234 L283.0066,488.5234" fill="none" style="stroke:#454645;stroke-width:1"/><rect fill="#F1F1F1" height="36.2969" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="150.7162" x="283.0066" y="526.6719"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="130.7162" x="293.0066" y="549.667">&#23631;&#34109;&#38750;&#26631;&#20934;&#35821;&#27861;/&#21327;&#35758;</text><rect fill="#F1F1F1" height="36.2969" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="233.5957" x="483.7228" y="526.6719"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="213.5957" x="493.7228" y="549.667">eg: jenkins groovy dsl -&gt; yaml</text><path d="M433.7228,544.8203 L443.7228,544.8203 C458.7228,544.8203 458.7228,544.8203 473.7228,544.8203 L483.7228,544.8203" fill="none" style="stroke:#454645;stroke-width:1"/><path d="M233.0066,544.8203 L243.0066,544.8203 C258.0066,544.8203 258.0066,544.8203 273.0066,544.8203 L283.0066,544.8203" fill="none" style="stroke:#454645;stroke-width:1"/><rect fill="#F1F1F1" height="36.2969" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="112.1481" x="283.0066" y="582.9688"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="92.1481" x="293.0066" y="605.9639">&#30333;&#21517;&#21333;API&#23631;&#34109;</text><rect fill="#F1F1F1" height="36.2969" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="242.6661" x="445.1547" y="582.9688"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="222.6661" x="455.1547" y="605.9639">eg: &#21482;&#20351;&#29992;&#30333;&#21517;&#21333;&#36335;&#30001;&#65292;&#38477;&#20302;&#25915;&#20987;&#38754;</text><path d="M395.1547,601.1172 L405.1547,601.1172 C420.1547,601.1172 420.1547,601.1172 435.1547,601.1172 L445.1547,601.1172" fill="none" style="stroke:#454645;stroke-width:1"/><path d="M233.0066,544.8203 L243.0066,544.8203 C258.0066,544.8203 258.0066,601.1172 273.0066,601.1172 L283.0066,601.1172" fill="none" style="stroke:#454645;stroke-width:1"/><path d="M85.9998,375.9297 L95.9998,375.9297 C110.9998,375.9297 110.9998,544.8203 125.9998,544.8203 L135.9998,544.8203" fill="none" style="stroke:#454645;stroke-width:1"/><rect fill="#F1F1F1" height="36.2969" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="89.9997" x="135.9998" y="667.4141"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="69.9997" x="145.9998" y="690.4092">&#38544;&#31169;&#19982;&#23457;&#35745;</text><rect fill="#F1F1F1" height="36.2969" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="103.9996" x="275.9995" y="639.2656"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="83.9996" x="285.9995" y="662.2607">&#29305;&#26435;&#36134;&#21495;&#23457;&#35745;</text><rect fill="#F1F1F1" height="36.2969" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="159.9994" x="429.9991" y="639.2656"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="139.9994" x="439.9991" y="662.2607">&#29305;&#26435;&#36134;&#21495;&#38656;&#35201;&#21333;&#29420;&#35760;&#24405;</text><path d="M379.9991,657.4141 L389.9991,657.4141 C404.9991,657.4141 404.9991,657.4141 419.9991,657.4141 L429.9991,657.4141" fill="none" style="stroke:#454645;stroke-width:1"/><path d="M225.9995,685.5625 L235.9995,685.5625 C250.9995,685.5625 250.9995,657.4141 265.9995,657.4141 L275.9995,657.4141" fill="none" style="stroke:#454645;stroke-width:1"/><rect fill="#F1F1F1" height="36.2969" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="105.0388" x="275.9995" y="695.5625"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="85.0388" x="285.9995" y="718.5576">&#24120;&#35265;AOP&#26041;&#26696;</text><path d="M225.9995,685.5625 L235.9995,685.5625 C250.9995,685.5625 250.9995,713.7109 265.9995,713.7109 L275.9995,713.7109" fill="none" style="stroke:#454645;stroke-width:1"/><path d="M85.9998,375.9297 L95.9998,375.9297 C110.9998,375.9297 110.9998,685.5625 125.9998,685.5625 L135.9998,685.5625" fill="none" style="stroke:#454645;stroke-width:1"/></g></svg><p>上述设计并没有唯一标准，而是建议参考学习开源且部分收费的项目（比如metabase，sentry，sonarqube）等系统设计。而且如果你希望项目速度快速度过EAP，尽可能采用缝合怪的形式进行包装。</p><p>比较容易的方案是基于Sidecar的思路去实现前置代理，将开源软件的安全/可用性/协议问题通过Socket进行封装，屏蔽业务系统对开源组件的直接侵入。</p><p>组网与技术维度</p><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="MINDMAP" height="786px" preserveAspectRatio="none" style="width:673px;height:786px;background:#fff" version="1.1" viewBox="0 0 673 786" width="673px" zoomAndPan="magnify" class="kroki">$2<defs/><g><rect fill="#F1F1F1" height="36.2969" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="75.9998" x="10" y="374.0781"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="55.9998" x="20" y="397.0732">&#32452;&#32593;&#32500;&#24230;</text><rect fill="#F1F1F1" height="36.2969" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="89.9997" x="135.9998" y="20"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="69.9997" x="145.9998" y="42.9951">&#37096;&#32626;&#31616;&#27905;&#24615;</text><rect fill="#F1F1F1" height="36.2969" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="229.9991" x="275.9995" y="20"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="209.9991" x="285.9995" y="42.9951">&#23613;&#21487;&#33021;&#25353;&#29031;&#31169;&#26377;&#37096;&#32626;&#30340;&#24605;&#36335;&#20570;&#36719;&#20214;</text><path d="M225.9995,38.1484 L235.9995,38.1484 C250.9995,38.1484 250.9995,38.1484 265.9995,38.1484 L275.9995,38.1484" fill="none" style="stroke:#454645;stroke-width:1"/><path d="M85.9998,392.2266 L95.9998,392.2266 C110.9998,392.2266 110.9998,38.1484 125.9998,38.1484 L135.9998,38.1484" fill="none" style="stroke:#454645;stroke-width:1"/><rect fill="#F1F1F1" height="36.2969" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="117.9996" x="135.9998" y="188.8906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="97.9996" x="145.9998" y="211.8857">&#20887;&#20313;&#19982;&#36335;&#30001;&#26041;&#26696;</text><rect fill="#F1F1F1" height="36.2969" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="173.9993" x="303.9993" y="76.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="153.9993" x="313.9993" y="99.292">&#21333;&#26426;&#65288;&#20063;&#19981;&#26159;&#19981;&#33021;&#25509;&#21463;&#65289;</text><path d="M253.9993,207.0391 L263.9993,207.0391 C278.9993,207.0391 278.9993,94.4453 293.9993,94.4453 L303.9993,94.4453" fill="none" style="stroke:#454645;stroke-width:1"/><rect fill="#F1F1F1" height="36.2969" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="117.9996" x="303.9993" y="132.5938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="97.9996" x="313.9993" y="155.5889">&#26080;&#29366;&#24577;&#65288;&#25512;&#33616;&#65289;</text><path d="M253.9993,207.0391 L263.9993,207.0391 C278.9993,207.0391 278.9993,150.7422 293.9993,150.7422 L303.9993,150.7422" fill="none" style="stroke:#454645;stroke-width:1"/><rect fill="#F1F1F1" height="36.2969" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="247.2122" x="303.9993" y="188.8906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="227.2122" x="313.9993" y="211.8857">&#20999;&#29255;+RaftKV&#65288;&#20294;&#35201;&#36991;&#20813;&#36807;&#24230;&#35774;&#35745;&#65289;</text><path d="M253.9993,207.0391 L263.9993,207.0391 C278.9993,207.0391 278.9993,207.0391 293.9993,207.0391 L303.9993,207.0391" fill="none" style="stroke:#454645;stroke-width:1"/><rect fill="#F1F1F1" height="36.2969" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="201.9992" x="303.9993" y="245.1875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="181.9992" x="313.9993" y="268.1826">&#26080;&#20013;&#24515;&#65288;&#38590;&#24230;&#39640;&#65292;&#38590;&#20197;&#24230;&#37327;&#65289;</text><path d="M253.9993,207.0391 L263.9993,207.0391 C278.9993,207.0391 278.9993,263.3359 293.9993,263.3359 L303.9993,263.3359" fill="none" style="stroke:#454645;stroke-width:1"/><rect fill="#F1F1F1" height="36.2969" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="212.8752" x="303.9993" y="301.4844"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="192.8752" x="313.9993" y="324.4795">&#20027;&#22791;&#65288;&#19981;&#25512;&#33616;&#65292;ROI&#19968;&#33324;&#24456;&#20302;&#65289;</text><path d="M253.9993,207.0391 L263.9993,207.0391 C278.9993,207.0391 278.9993,319.6328 293.9993,319.6328 L303.9993,319.6328" fill="none" style="stroke:#454645;stroke-width:1"/><path d="M85.9998,392.2266 L95.9998,392.2266 C110.9998,392.2266 110.9998,207.0391 125.9998,207.0391 L135.9998,207.0391" fill="none" style="stroke:#454645;stroke-width:1"/><rect fill="#F1F1F1" height="36.2969" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="75.9998" x="135.9998" y="442.2266"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="55.9998" x="145.9998" y="465.2217">&#20581;&#24247;&#26816;&#27979;</text><rect fill="#F1F1F1" height="36.2969" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="75.9998" x="261.9995" y="357.7813"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="55.9998" x="271.9995" y="380.7764">&#24515;&#36339;&#26816;&#26597;</text><rect fill="#F1F1F1" height="36.2969" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="127.8506" x="387.9993" y="357.7813"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="107.8506" x="397.9993" y="380.7764">HTTP Code/TCP</text><path d="M337.9993,375.9297 L347.9993,375.9297 C362.9993,375.9297 362.9993,375.9297 377.9993,375.9297 L387.9993,375.9297" fill="none" style="stroke:#454645;stroke-width:1"/><path d="M211.9995,460.375 L221.9995,460.375 C236.9995,460.375 236.9995,375.9297 251.9995,375.9297 L261.9995,375.9297" fill="none" style="stroke:#454645;stroke-width:1"/><rect fill="#F1F1F1" height="36.2969" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="169.8643" x="261.9995" y="470.375"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="149.8643" x="271.9995" y="493.3701">APM(OpenTelemetry)</text><rect fill="#F1F1F1" height="36.2969" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="55.2256" x="481.8638" y="414.0781"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="35.2256" x="491.8638" y="437.0732">Span</text><path d="M431.8638,488.5234 L441.8638,488.5234 C456.8638,488.5234 456.8638,432.2266 471.8638,432.2266 L481.8638,432.2266" fill="none" style="stroke:#454645;stroke-width:1"/><rect fill="#F1F1F1" height="36.2969" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="52.5459" x="481.8638" y="470.375"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="32.5459" x="491.8638" y="493.3701">Logs</text><path d="M431.8638,488.5234 L441.8638,488.5234 C456.8638,488.5234 456.8638,488.5234 471.8638,488.5234 L481.8638,488.5234" fill="none" style="stroke:#454645;stroke-width:1"/><rect fill="#F1F1F1" height="36.2969" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="179.7418" x="481.8638" y="526.6719"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="159.7418" x="491.8638" y="549.667">Metrics(&#21547;&#32593;&#20851;&#27969;&#37327;&#26816;&#26597;)</text><path d="M431.8638,488.5234 L441.8638,488.5234 C456.8638,488.5234 456.8638,544.8203 471.8638,544.8203 L481.8638,544.8203" fill="none" style="stroke:#454645;stroke-width:1"/><path d="M211.9995,460.375 L221.9995,460.375 C236.9995,460.375 236.9995,488.5234 251.9995,488.5234 L261.9995,488.5234" fill="none" style="stroke:#454645;stroke-width:1"/><path d="M85.9998,392.2266 L95.9998,392.2266 C110.9998,392.2266 110.9998,460.375 125.9998,460.375 L135.9998,460.375" fill="none" style="stroke:#454645;stroke-width:1"/><rect fill="#F1F1F1" height="36.2969" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="75.9998" x="135.9998" y="655.5625"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="55.9998" x="145.9998" y="678.5576">&#26356;&#26032;&#31574;&#30053;</text><rect fill="#F1F1F1" height="36.2969" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="118.4238" x="261.9995" y="591.1172"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="98.4238" x="271.9995" y="614.1123">RollingUpdate</text><rect fill="#F1F1F1" height="52.5938" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="207.1812" x="430.4233" y="582.9688"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="49.8477" x="440.4233" y="605.9639">Canary</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="187.1812" x="440.4233" y="622.2607">(By selector&#65292;&#25512;&#33616;&#36825;&#37324;&#23450;&#21046;)</text><path d="M380.4233,609.2656 L390.4233,609.2656 C405.4233,609.2656 405.4233,609.2656 420.4233,609.2656 L430.4233,609.2656" fill="none" style="stroke:#454645;stroke-width:1"/><path d="M211.9995,673.7109 L221.9995,673.7109 C236.9995,673.7109 236.9995,609.2656 251.9995,609.2656 L261.9995,609.2656" fill="none" style="stroke:#454645;stroke-width:1"/><rect fill="#F1F1F1" height="52.5938" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="136.874" x="261.9995" y="655.5625"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="63.0889" x="271.9995" y="678.5576">Recreate</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="116.874" x="271.9995" y="694.8545">(With downtime)</text><path d="M211.9995,673.7109 L221.9995,673.7109 C236.9995,673.7109 236.9995,681.8594 251.9995,681.8594 L261.9995,681.8594" fill="none" style="stroke:#454645;stroke-width:1"/><rect fill="#F1F1F1" height="36.2969" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:1.5" width="160.2803" x="261.9995" y="728.1563"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="140.2803" x="271.9995" y="751.1514">Security: Key-rotate</text><path d="M211.9995,673.7109 L221.9995,673.7109 C236.9995,673.7109 236.9995,746.3047 251.9995,746.3047 L261.9995,746.3047" fill="none" style="stroke:#454645;stroke-width:1"/><path d="M85.9998,392.2266 L95.9998,392.2266 C110.9998,392.2266 110.9998,673.7109 125.9998,673.7109 L135.9998,673.7109" fill="none" style="stroke:#454645;stroke-width:1"/></g></svg><h2>持续性</h2><h4>简单优先</h4><p>优先选择代码量低，依赖少的组件，而不是功能大而全的产品。</p><p>比如在进行私有APM工具选型时，我们发现Sentry是业界Top的APM软件。然而即使它非常优秀，技术架构完美，有上百个专业的全职雇员和成熟社区，但是它实在太复杂了（29个微服务，接近上百个表），导致引入生产环境后，没人敢兜底，最终选型被否决。</p><h4>社区BCM</h4><p>尽可能选择有赞助的社区或者公司，要求它能贯穿整个软件的生命周期</p><h4>版本元数据与漏洞</h4><ul><li>建议订阅各种RSS与dependency-bot对齐最新版本，比如fossa等工具</li><li>尽可能选择LTS版本，除非你需要的特性正在开发中</li></ul><h4>避免供应商锁定</h4><p>一般采用Wrapper/sidecar进行隔离（从RPC到Common库隔离都可以，尤其注意业务前端侧的API接口不要直接用开源实现，而要封装一层。当你的软件后期想对外卖，而相关协议比较严格（比如BSL，X-Pack）的开源软件希望去掉时就比较痛苦了。同时还有安全加固的作用，限制可以传递的参数。</p></div><div class="tags"><a class="tag-link" href="/tags/System-Design/" rel="tag">System Design</a></div></section><div class="comments no-print"><noscript>Please enable JavaScript to view comments.</noscript><script async src="https://giscus.app/client.js" data-repo="miao1007/miao1007.github.io" data-repo-id="MDEwOlJlcG9zaXRvcnkxMzA1NTY1MDU=" data-category="General" data-category-id="DIC_kwDOB8giWc4COaTx" data-mapping="url" data-reactions-enabled="0" data-emit-metadata="0" data-input-position="bottom" data-theme="light" data-lang="en" data-loading="lazy" crossorigin="anonymous"></script></div></div></div><footer class="no-print"><div class="rights"><a href="/feed.xml" rel="external nofollow">RSS</a><span>, Theme </span><a href="https://github.com/gary-Shen/hexo-theme-bear" rel="external nofollow" target="_blank">Curry.</a><span> All contents are not allowed to be redistributed or synthesised without an explicit permission.</span></div></footer></div></body></html>